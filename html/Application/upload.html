<!DOCTYPE html>

<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">

	<script src="//cdn.biodeep.cn/vendor/jquery-3.2.1.min.js" type="text/javascript"></script>
	<script src="/javascript/bioCAD.FileSystem.Explorer.js" type="text/javascript"></script>

	<!-- 引入layer框架 -->
	<link href="http://cdn.biodeep.cn/vendor/layui/css/layui.css" rel="stylesheet" />
	<script src="http://cdn.biodeep.cn/vendor/layui/layui.js"></script>

	<link crossorigin="anonymous" media="all" rel="stylesheet" href="/typescript/UI/bioCAD.FileSystem.Explorer/Uploader/uploader.css">
</head>

<body>
	<div id="uploader-container" class="container" role="main">

		<!-- 修改下面的三个函数来处理上传所相对应的事件 -->
		<script type="text/javascript">
			Uploader.Register(
				"uploader-container",
				"{api/upload}&project_id={$project_id}",
				new EventHandler(function (xhr, event) {
					var result = $.parseJSON(xhr.responseText);

					// 上传成功响应
					// 服务断接收完文件返回的结果
					// alert(evt.target.responseText);
					console.log(xhr.responseText);

					if (result.code != 0) {
						// 上传失败
						// 显示错误信息之后重置上传窗口
						layer.msg(result.info, { icon: 5 }, function () {

						});
					} else {
						// 上传成功
						// 显示消息之后刷新整个窗口
						layer.msg(result.info, { icon: 1 }, function () {
							// parent.location.reload();
						});
					}
				}, function (xhr, event) {

				})
			);
		</script>
	</div>
</body>

</html>