var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,e){a!=Array.prototype&&a!=Object.prototype&&(a[b]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,e,f){if(b){e=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var c=a[f];c in e||(e[c]={});e=e[c]}a=a[a.length-1];f=e[a];b=b(f);b!=f&&null!=b&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:b})}};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},b={};try{return b.__proto__=a,b.a}catch(e){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null;$jscomp.polyfill("Object.setPrototypeOf",function(a){return a||$jscomp.setPrototypeOf},"es6","es5");$jscomp.arrayIteratorImpl=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};
$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};
$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var e=0,f={next:function(){if(e<a.length){var c=e++;return{value:b(c,a[c]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
var __extends=this&&this.__extends||function(){var a=function(b,e){a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])};return a(b,e)};return function(b,e){function f(){this.constructor=b}a(b,e);b.prototype=null===e?Object.create(e):(f.prototype=e.prototype,new f)}}(),bioCAD;
(function(a){(function(a){var b=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}__extends(c,a);Object.defineProperty(c.prototype,"appName",{get:function(){return"login"},enumerable:!0,configurable:!0});c.prototype.init=function(){};c.prototype.login_click=function(){c.do_login()};c.do_login=function(){var a=$ts.value("#username"),c=$ts.value("#password"),b=$ts("@api:login");$ts.post(b,{account:a,password:md5(c)},function(a){0==a.code?(a=$ts.location("goto",!1,"/"),a=decodeURIComponent(a),
Strings.Empty(a,!0)?parent.gotoURL("/"):parent.gotoURL(a)):parent.msgbox(a.info,1)})};return c}(Bootstrap);a.LoginScript=b})(a.WebApp||(a.WebApp={}))})(bioCAD||(bioCAD={}));
(function(a){(function(a){var b=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}__extends(c,a);Object.defineProperty(c.prototype,"appName",{get:function(){return"recover"},enumerable:!0,configurable:!0});c.prototype.init=function(){};c.doRecover_onclick=function(){throw"not implemented!";};return c}(Bootstrap);a.RecoverScript=b})(a.WebApp||(a.WebApp={}))})(bioCAD||(bioCAD={}));
(function(a){(function(a){var b=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}__extends(c,a);Object.defineProperty(c.prototype,"appName",{get:function(){return"register"},enumerable:!0,configurable:!0});c.prototype.init=function(){};c.prototype.doRegister_onclick=function(){var a=$ts("#username").CType().value,c=$ts("#email").CType().value,b=$ts("#password").CType().value,f=$ts("#check_terms_of_use").CType().checked,e=$ts("@api:register");f?a&&c&&b?$ts.post(e,{username:a,
password:md5(b),email:c},function(a){0==a.code?parent.gotoLogin():parent.msgbox(a.info,1)}):parent.msgbox("One of the required field is empty!",1):parent.msgbox("You should agree our bioCAD Terms of use at first!",1)};return c}(Bootstrap);a.RegisterScript=b})(a.WebApp||(a.WebApp={}))})(bioCAD||(bioCAD={}));var dev=console,logo=["%c\n\n  .Ci     .bi           oDDDi    iDi   .CDDDDl             .Ci                     .C.\n  .Ci     .bi         .bo  .c.   oCo   .Cl  .Cb.           .Ci                     .C.\n  .Ci                .Co        .CiA.  .Cl    oo           .Ci                     .C.\n  .CiCDDl .bi .CDDb. .A.        lo.Cl  .Cl    .A.     oDDl .Ci .CDDb. .bi  ib. .CDDcC.\n  .Cb. .bi.bi.Co  ib.iC.       .Ci iC. .Cl    .C.   .CC. i..Ci.Co  ib..bi  ib..Co  ob.\n  .Cl   oo.biib.   oliC.       .C. .bi .Cl    .C.   .C.    .Ciib.   ol.bi  ib..C.  .C.\n  .Ci   lo.biiC.   oo.C.       lDDDDDo .Cl    .C.   iC.    .CiiC.   oo.bi  ib.iC.  .C.\n  .Ci   ol.biib.   ol.Cl      .bi   ib..Cl    oo    ib.    .Ciib.   ol.bi  ib.ib.  .A.\n  .Cb. ib..bi.Co  ib. iDl  .c.ib.   .bl.Cl  .CC. .bi.Co  i..Ci.Co  ib..Co .Cb..bl .Cb.\n  .CibDDi .bi .CDDb.   .bDDb. oo     oC.CDDDDl   .bi .CDDl .Ci .CDDb.  .bDblb. .bDDiC.\n\n                                                                   http://bioCAD.cloud \n                                               xieguigang <xie.guigang@gcmodeller.org>\n\n"].concat(["color:#084B8A"]);
console.log.apply(dev,logo);(function(a){(function(a){a.start=function(){Router.AddAppHandler(new a.LoginScript);Router.AddAppHandler(new a.RegisterScript);Router.AddAppHandler(new a.RecoverScript);Router.AddAppHandler(new a.Platform.TaskMgr);Router.AddAppHandler(new a.Platform.Report);Router.AddAppHandler(new a.Platform.FileManager);Router.RunApp()}})(a.WebApp||(a.WebApp={}))})(bioCAD||(bioCAD={}));$ts.mode=Modes.debug;$ts(bioCAD.WebApp.start);var containerClassName="file-preview-thumbnails",Application;
(function(a){(function(a){a.show=function(b,f,c){var d=$ts(b),k=$from(c).ToDictionary(function(a){return a.classID.toString()},function(a){return a}),m=$from(c).ToDictionary(function(a){return a.classID.toString()},function(a){return a.class});f=$from(f).Select(function(c){return new a.bioCADFile(c,k)}).Select(function(c){var d=m.Item(c.mime.contentType);d=a.bioMimeTypes.classToFontAwsome(d);return new a.FileHandle(c,d)});d.classList.contains(containerClassName)||d.classList.add(containerClassName);
c=0;for(var l=f.ToArray();c<l.length;c++){var e=l[c];d.appendChild(e.getNode());e.handleEvents()}return{container:d,files:f.ToArray(),divId:b}}})(a.Explorer||(a.Explorer={}))})(Application||(Application={}));(function(a){(function(a){var b=function(){function a(a,d){this.id=a.id;this.fileName=a.name;this.size=a.size;this.mime=d.Item(a.content_type)}a.prototype.toString=function(){return this.fileName};return a}();a.bioCADFile=b})(a.Explorer||(a.Explorer={}))})(Application||(Application={}));
(function(a){(function(a){var b=function(){function a(a,d){this.file=a;this.mimeIcon=d}Object.defineProperty(a.prototype,"fileId",{get:function(){return this.file.id.toString()},enumerable:!0,configurable:!0});a.prototype.footer=function(){return'<div class="file-footer-caption" title="'+this.file.fileName+'">\n                    <div class="file-caption-info">'+this.file.fileName+'</div>\n                    <div class="file-size-info">\n                        <samp>('+this.file.size+")</samp>\n                    </div>\n                </div>"};
a.prototype.actionButtons=function(){return'<div class="file-actions">\n                    <div class="file-footer-buttons">\n                        <button type="button" \n                                class="kv-file-remove btn btn-sm btn-kv btn-default btn-outline-secondary" \n                                title="Delete file" \n                                data-url="/site/file-delete" \n                                data-key="'+this.fileId+'">\n\n                            <i class="glyphicon glyphicon-trash">\n                            </i>\n                        </button>\n                        <button id="view-'+
this.fileId+'" type="button" class="kv-file-zoom btn btn-sm btn-kv btn-default btn-outline-secondary" title="View Details">\n                            <i class="glyphicon glyphicon-zoom-in"></i>\n                        </button>\n                    </div>\n                </div>'};a.prototype.handleEvents=function(){var a=this;$ts("#view-"+this.fileId).onclick=function(){a.viewer_click()}};a.prototype.viewer_click=function(){$ts("#diag-title").clear().innerText="View Model";$ts("#diag-body").clear().display($ts("<iframe>",
{src:"@view:model?guid="+this.fileId+"&iframe=true&debugger=false",width:"1500px",height:"650px",frameborder:"no",border:"0",marginwidth:"0",marginheight:"0",scrolling:"no",allowtransparency:"yes"}));$ts("#viewer-modal").style.zIndex="1050000";$("#viewer-modal").modal("show")};a.prototype.getNode=function(){var a=this.mimeIcon[0],d=this.mimeIcon[1];a=$ts("<div>",{class:"kv-file-content"}).display($ts("<div>",{class:["kv-preview-data","file-preview-other-frame"],style:"width:auto;height:auto;max-width:100%;max-height:100%;"}).display('\n                <div class="file-preview-other">\n                    <span class="file-other-icon">\n                        <a href="/biostack/pathway_design/view?guid='+
this.fileId+'">\n                            <center>\n                                <div style="max-width: 128px; height: 50px; color: '+d+';">\n                                    '+a+"\n                                </div>\n                            </center>\n                        </a>\n                    </span>\n                </div>\n            "));d=$ts("<div>",{class:"file-thumbnail-footer"}).appendElement(this.footer()).appendElement(this.actionButtons()).appendElement($ts("<div>",
{class:"clearfix"}));return $ts("<div>",{class:["file-preview-frame","krajee-default","file-preview-initial","file-sortable","kv-preview-thumb"],id:"r-"+this.fileId,"data-fileindex":this.fileId,"data-template":"image",title:this.file.fileName}).appendElement(a).appendElement(d)};a.classNames=["file-preview-frame","krajee-default","file-preview-initial","file-sortable","kv-preview-thumb"];return a}();a.FileHandle=b})(a.Explorer||(a.Explorer={}))})(Application||(Application={}));
(function(a){(function(a){(function(a){function b(a){return'<svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="'+a[0]+'" height="128" class="svg-inline--fa fa-w-12 fa-9x">\n                    <path fill="currentColor" d="'+a[1]+'">\n                    </path>\n                </svg>'}var c=["0 0 384 512","M0 495.1C-.5 503 5.2 512 15.4 512h15.4c8.1 0 14.7-6.2 15.3-14.4.3-4.5 1-10.5 2.2-17.6h287c1.2 \n             7.1 2.1 13.4 2.5 17.7.7 8.1 7.3 14.3 15.3 14.3h15.5c11.5 0 15.8-10.7 15.3-16.8-2.1-29.5-16.3-126.8-108.5-208.8-12.6 \n             9.3-26.2 18.2-40.9 26.7 9.1 7.5 17 15.2 24.6 23H123.6c20.6-20.9 46.4-41.3 79.3-59.3C359.8 \n             190.5 381.2 56 384 16.9 384.5 9 378.8 0 368.6 0h-15.4c-8.1 0-14.7 6.2-15.3 14.4-.3 4.5-1 10.5-2.2 \n             17.6H48.6c-1.3-7.1-2-13.2-2.4-17.7C45.5 6.2 38.9 0 30.9 0H15.4C5.2 0-.5 9.1 0 16.9c2.6 35.7 21.2 \n             153 147.9 238.9C21.3 341.4 2.6 458.9 0 495.1zM322.4 80c-5.7 15-13.6 31.3-24.2 48H86.3C75.7 111.3 \n             67.8 95 62 80h260.4zM192 228.8c-27.4-16.3-49.4-34.3-67.5-52.8h135.4c-18.2 18.4-40.3 36.4-67.9 52.8zM61.4 \n             432c5.7-14.9 13.5-31.2 24.1-48h211.7c10.6 16.8 18.6 33 24.4 48H61.4z"],
d=["0 0 384 512","M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 \n             12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 \n             26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 \n             14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 \n             0-24-10.7-24-24V48H48v416h288z"],
k=["0 0 384 512","M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 \n             48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 \n             10.7 24 24 24h104v288H48zm32-48h224V288l-23.5-23.5c-4.7-4.7-12.3-4.7-17 0L176 352l-39.5-39.5c-4.7-4.7-12.3-4.7-17 \n             0L80 352v64zm48-240c-26.5 0-48 21.5-48 48s21.5 48 48 48 48-21.5 48-48-21.5-48-48-48z"],m=["0 0 384 512","M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 \n             48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 \n             10.7 24 24 24h104v288H48zm212-240h-28.8c-4.4 0-8.4 2.4-10.5 6.3-18 33.1-22.2 42.4-28.6 57.7-13.9-29.1-6.9-17.3-28.6-57.7-2.1-3.9-6.2-6.3-10.6-6.3H124c-9.3 \n             0-15 10-10.4 18l46.3 78-46.3 78c-4.7 8 1.1 18 10.4 18h28.9c4.4 0 8.4-2.4 10.5-6.3 21.7-40 23-45 \n             28.6-57.7 14.9 30.2 5.9 15.9 28.6 57.7 2.1 3.9 6.2 6.3 10.6 6.3H260c9.3 0 15-10 10.4-18L224 320c.7-1.1 \n             30.3-50.5 46.3-78 4.7-8-1.1-18-10.3-18z"],
l=["0 0 448 512","M448 80v352c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 \n             0 48 21.49 48 48zm-48 346V86a6 6 0 0 0-6-6H54a6 6 0 0 0-6 6v340a6 6 0 0 0 6 6h340a6 6 0 0 0 6-6zm-68.756-225.2c0 \n             67.052-72.421 68.084-72.421 92.863V300c0 6.627-5.373 12-12 12h-45.647c-6.627 0-12-5.373-12-12v-8.659c0-35.745 \n             27.1-50.034 47.579-61.516 17.561-9.845 28.324-16.541 28.324-29.579 0-17.246-21.999-28.693-39.784-28.693-23.189 \n             0-33.894 10.977-48.942 29.969-4.057 5.12-11.46 6.071-16.666 2.124l-27.824-21.098c-5.107-3.872-6.251-11.066-2.644-16.363C152.846 \n             131.491 182.94 112 229.794 112c49.071 0 101.45 38.304 101.45 88.8zM266 368c0 23.159-18.841 42-42 \n             42s-42-18.841-42-42 18.841-42 42-42 42 18.841 42 42z"],
e=["0 0 384 512","M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm68.53 \n             179.48l11.31 11.31c6.25 6.25 6.25 16.38 0 22.63l-29.9 29.9L304 409.38c6.25 6.25 6.25 16.38 0 22.63l-11.31 11.31c-6.25\n             6.25-16.38 6.25-22.63 0L240 413.25l-30.06 30.06c-6.25 6.25-16.38 6.25-22.63 0L176 432c-6.25-6.25-6.25-16.38\n             0-22.63l30.06-30.06L146.74 320H128v48c0 8.84-7.16 16-16 16H96c-8.84 0-16-7.16-16-16V208c0-8.84 7.16-16 16-16h80c35.35 0\n             64 28.65 64 64 0 24.22-13.62 45.05-33.46 55.92L240 345.38l29.9-29.9c6.25-6.25 16.38-6.25 22.63 0zM176 272h-48v-32h48c8.82\n             0 16 7.18 16 16s-7.18 16-16 16zm208-150.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"];
a.classToFontAwsome=function(a){var h=BioCAD.MIME.bioClassType;return a==h.text?[b(d),"green"]:a==h.image?[b(k),"red"]:a==h.matrix?[b(m),"darkgreen"]:a==h.bioSequence?[b(c),"lightblue"]:a==h.model?[b(e),"brown"]:[b(l),"gray"]}})(a.bioMimeTypes||(a.bioMimeTypes={}))})(a.Explorer||(a.Explorer={}))})(Application||(Application={}));
(function(a){(function(a){(function(b){function e(a,b,m,l,e,h,f,r){void 0===e&&(e=10);void 0===h&&(h=!1);void 0===f&&(f=null);void 0===r&&(r=null);var d=$ts(m);d&&(d.clear(),a.populateSuggestion(b,e,h).forEach(function(a){d.appendChild(c(a,r,l))}),isNullOrUndefined(f)||a.hasEquals(b,h)||(a=$ts("<a>",{href:executeJavaScript,text:b,title:b,onclick:function(){f(b)}}).display("add '"+b+"'"),d.append($ts("<div>",{class:r}).display(a))))}function c(a,c,b){var d=$ts("<a>",{href:executeJavaScript,text:a.term,
title:a.term,onclick:function(){b(a)}}).display(a.term);return $ts("<div>",{class:c}).display(d)}b.makeSuggestions=function(c,b,m,f,n,h,q){void 0===f&&(f=10);void 0===n&&(n=!1);void 0===h&&(h=null);void 0===q&&(q=null);var d=new a.suggestion(c);return function(a){e(d,a,b,m,f,n,q,h)}}})(a.render||(a.render={}))})(a.Suggestion||(a.Suggestion={}))})(Application||(Application={}));
(function(a){(function(a){var b=function(){function b(a){this.terms=a}b.prototype.hasEquals=function(a,b){void 0===b&&(b=!1);b||(a=a.toLowerCase());for(var c=0,d=this.terms;c<d.length;c++){var e=d[c];if(b){if(e.term.toLowerCase()==a)return!0}else if(e.term==a)return!0}return!1};b.prototype.populateSuggestion=function(c,d,k){void 0===d&&(d=5);void 0===k&&(k=!1);var e=c.toLowerCase(),f=$from(this.terms).Select(function(a){var d=b.getScore(a,c,e,k);return{term:a,score:d}}).OrderBy(function(a){return a.score}),
n=f.Where(function(b){return b.score!=a.NA}).Take(d).Select(function(a){return a.term}).ToArray();return n.length==d?n:b.makeAdditionalSuggestion(f,n,k,c,d)};b.makeAdditionalSuggestion=function(a,b,e,f,l){var c=f.toLowerCase();a=a.Skip(b.length).Select(function(a){a=a.term;var b=e?Levenshtein.ComputeDistance(a.term.toLowerCase(),c):Levenshtein.ComputeDistance(a.term,f);return{term:a,score:b}}).OrderBy(function(a){return a.score}).Take(l-b.length).Select(function(a){return a.term}).ToArray();return b.concat(a)};
b.getScore=function(b,d,e,f){return f?(b=b.term.toLowerCase(),a.term.indexOf(b,e)):b.dist(d)};return b}();a.suggestion=b})(a.Suggestion||(a.Suggestion={}))})(Application||(Application={}));
(function(a){(function(a){a.NA=1E11;var b=function(){function b(a,b){this.id=a;this.term=b}b.prototype.dist=function(a){return b.indexOf(this.term,a)};b.indexOf=function(b,d){return-1==b.indexOf(d)?a.NA:Math.abs(d.length-b.length)};return b}();a.term=b})(a.Suggestion||(a.Suggestion={}))})(Application||(Application={}));
(function(a){(function(a){(function(a){var b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}__extends(b,a);Object.defineProperty(b.prototype,"appName",{get:function(){return"FileExplorer"},enumerable:!0,configurable:!0});b.prototype.init=function(){var a=this;$ts.get("@data:bio_mimetype",function(b){0!=b.code?console.error(b):(a.version=b.info.version,a.mimes=$from(b.info.content_types).Select(function(a){return new BioCAD.MIME.mimeType(a)}).ToArray(),a.loadFiles(a.mimes))})};
b.prototype.loadFiles=function(a){var b=this;$ts.get("@data:fetch?page=1",function(c){0!=c.code?console.error(c):b.explorer=Application.Explorer.show("#file-explorer-display",c.info,a)})};return b}(Bootstrap);a.FileManager=b})(a.Platform||(a.Platform={}))})(a.WebApp||(a.WebApp={}))})(bioCAD||(bioCAD={}));
(function(a){(function(a){(function(a){a.listDiv="#sample_suggests";a.inputDiv="#sample_search";var b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;a.pathways=new Dictionary;a.data={y:new IEnumerator([])};return a}__extends(c,b);Object.defineProperty(c.prototype,"appName",{get:function(){return"reportViewer"},enumerable:!0,configurable:!0});c.prototype.updateChart=function(a){var b=this;this.makeChartInternal(function(){if("*"==a)return b.data.y;if(b.pathways.ContainsKey(a)){var c=
b.pathways.Item(a),d=$from(c.keys);return b.data.y.Where(function(a){return d.Any(function(b){return b==a.name})})}return b.data.y.Where(function(b){return a==b.name})}())};c.parseData=function(a){return a.headers.Where(function(a){return""!=a}).Select(function(b){var c=a.Column(b).Skip(1).Select(function(a,b){return[b,parseFloat(a)]});return{name:b,type:"line",smooth:!0,showSymbol:!1,clip:!0,data:c.ToArray(),emphasis:{focus:"series"},ymax:c.Select(function(a){return a[1]}).Max()}})};c.prototype.makeChart=
function(a,b){var d=$ts.csv(a,!1);d=c.parseData(d);this.csvText=a;this.myChart=b;this.data.y=d;this.makeChartInternal(d);b.on("legendselectchanged",function(a){console.log(a)})};c.prototype.makeChartInternal=function(a){var b=TypeScript.Data.quantile(a.Select(function(a){return a.ymax}).ToArray(),.65),c=this.myChart;b={animation:!1,tooltip:{trigger:"none",axisPointer:{type:"cross"}},legend:{},grid:{top:40,left:50,right:40,bottom:50},xAxis:{name:"Time(ticks)",minorTick:{show:!0},minorSplitLine:{show:!0},
nameLocation:"middle"},yAxis:{name:"Activity",min:0,max:Math.round(1.25*b),minorTick:{show:!0},minorSplitLine:{show:!0}},series:a.ToArray()};console.log("lines:");console.log(a);b&&c.setOption(b,!0,!1)};c.prototype.init=function(){var a=this,b=document.getElementById("main"),c=echarts.init(b);$ts.getText("@data:PLAS",function(b){return a.makeChart(b,c)});$ts.getText("@url:graph",function(b){return a.initPathwaySelector(JSON.parse(b))})};c.prototype.getPLAS_onclick=function(){var a={mime_type:"text/html",
data:Base64.encode(this.csvText)};DOM.download("PLAS_output.csv",a,!1)};c.prototype.initPathwaySelector=function(b){var c=this,d=$ts("#pathway_list"),e=$ts("<optgroup>",{label:"Pathways"}),f=$ts("<optgroup>",{label:"Metabolites"}),q=this.pathways,r=this,k=[];e.appendChild($ts("<option>",{value:"*"}).display("*"));for(var p=0,u=b.nodeDataArray;p<u.length;p++){var g=u[p];if(g.isGroup){var w={pathway:g.label,keys:[]},t=$ts("<option>",{value:g.key}),v=new Application.Suggestion.term(g.key,g.text);t.innerText=
g.text;k.push(v);q.Add(g.key.toString(),w);e.appendChild(t)}}p=0;for(b=b.nodeDataArray;p<b.length;p++)g=b[p],!isNullOrUndefined(g.isGroup)&&g.isGroup||Strings.Empty(g.group,!0)||(u=q.Item(g.group.toString()),t=$ts("<option>",{value:g.label}),v=new Application.Suggestion.term(g.label,g.label),t.innerText=g.label,u.keys.push(g.label),"valve"==g.category||Strings.Empty(g.label,!0)||(k.push(v),f.appendChild(t)));d.add(e);d.add(f);d.onchange=function(){var a=$ts.select.getOption("#pathway_list");isNullOrUndefined(a)||
Strings.Empty(a)||r.updateChart(a.toString())};var x=Application.Suggestion.render.makeSuggestions(k,a.listDiv,function(a){return c.clickOnTerm(a)},5,!0,"");$ts(a.inputDiv).onkeyup=function(){var b=$ts.value(a.inputDiv);Strings.Empty(b,!0)?$ts(a.listDiv).hide():($ts(a.listDiv).show(),x(b))}};c.prototype.clickOnTerm=function(b){$ts.value("#pathway_list",b.id.toString());$ts(a.listDiv).hide();this.updateChart(b.id)};return c}(Bootstrap);a.Report=b})(a.Platform||(a.Platform={}))})(a.WebApp||(a.WebApp=
{}))})(bioCAD||(bioCAD={}));
(function(a){(function(a){(function(a){function b(a){switch(a.toString()){case "0":return"pending";case "200":return"completed";case "500":return"delayed";case "1":return"on_schedule"}}var c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}__extends(c,a);Object.defineProperty(c.prototype,"appName",{get:function(){return"app_task"},enumerable:!0,configurable:!0});c.prototype.init=function(){var a=this;$ts.get("@data:task_list",function(b){0!=b.code?parent.msgbox(b.info,1):a.loadTable(b.info)});
a.totalTasks=parseInt($ts("@data:count_task"));TypeScript.logging.log("You have "+a.totalTasks+" tasks in total!",TypeScript.ConsoleColors.Magenta)};c.prototype.loadTable=function(a){for(var b=$ts("#tasklist").clear(),c=0;c<a.length;c++)b.appendElement(this.taskRow(a[c]))};c.prototype.getModelId=function(a){var b=Bencode.decode(a.parameters);console.log("get task model id for:");console.log(a);console.log(b);a=0;for(var c=["model","file"];a<c.length;a++){var d=c[a];if(d in b)return b[d]}return""};
c.prototype.taskRow=function(a){var c=a.app_view+"?guid="+this.getModelId(a),f=$ts("<th>").appendElement($ts("<div>",{class:["media","align-items-center"]}).appendElement('\n                        <a href="#" class="avatar rounded-circle mr-3">\n                            <img alt="Image placeholder"\n                                src="/resources/images/icons/'+a.name+'.png">\n                        </a>').appendElement('\n                        <div class="media-body">\n                            <a href="/task/report/?q='+
a.sha1+'" target="__blank">\n                                <h4 class="mb-0">'+a.title+"</h4>\n                            </a>                            \n                        </div>")),h=$ts("<td>").appendElement(a.create_time),k=$ts("<td>").appendElement(m[b(a.status)]),l=$ts("<td>").appendElement(a.finish_time||"n/a");a=$ts("<td>").appendElement(e[b(a.status)]);c=$ts("<td>",{class:"text-right"}).appendElement(d.replace("{$model_url}",c));return $ts("<tr>").appendElement(f).appendElement(h).appendElement(k).appendElement(l).appendElement(a).appendElement(c)};
return c}(Bootstrap);a.TaskMgr=c;var d='\n        <div class="dropdown">\n            <a class="btn btn-sm btn-icon-only text-light" href="#" role="button"\n                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"\n                style="box-shadow: none;">\n\n                <i class="fas fa-ellipsis-v"></i>\n            </a>\n            <div class="dropdown-menu dropdown-menu-right dropdown-menu-arrow">\n                <a class="dropdown-item bg-danger" href="#">Delete</a>\n                <a class="dropdown-item" href="{$model_url}">View Model</a>\n                <a class="dropdown-item" href="#">Help</a>\n            </div>\n        </div>\n    ',
e={pending:'<div class="d-flex align-items-center">\n                                            <span class="mr-2">0%</span>\n                                            <div>\n                                                <div class="progress">\n                                                    <div class="progress-bar bg-warning" role="progressbar"\n                                                        aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"\n                                                        style="width: 1%;"></div>\n                                                </div>\n                                            </div>\n                                        </div>',
completed:'<div class="d-flex align-items-center">\n                                            <span class="mr-2">100%</span>\n                                            <div>\n                                                <div class="progress">\n                                                    <div class="progress-bar bg-success" role="progressbar"\n                                                        aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"\n                                                        style="width: 100%;"></div>\n                                                </div>\n                                            </div>\n                                        </div>',
delayed:'<div class="d-flex align-items-center">\n                                            <span class="mr-2">{$pct}%</span>\n                                            <div>\n                                                <div class="progress">\n                                                    <div class="progress-bar bg-danger" role="progressbar"\n                                                        aria-valuenow="{$pct}" aria-valuemin="0" aria-valuemax="100"\n                                                        style="width: {$pct}%;"></div>\n                                                </div>\n                                            </div>\n                                        </div>',
on_schedule:'<div class="d-flex align-items-center">\n                                            <span class="mr-2">{$pct}%</span>\n                                            <div>\n                                                <div class="progress">\n                                                    <div class="progress-bar bg-info" role="progressbar"\n                                                        aria-valuenow="{$pct}" aria-valuemin="0" aria-valuemax="100"\n                                                        style="width: {$pct}%;"></div>\n                                                </div>\n                                            </div>\n                                        </div>'},
m={pending:'<span class="badge badge-dot mr-4" style="color: #fb6340 !important;">\n                      <i class="bg-warning"></i> pending\n                  </span>',completed:'<span class="badge badge-dot" style="color: #2dce89 !important;">\n                        <i class="bg-success"></i> completed\n                    </span>',delayed:'<span class="badge badge-dot mr-4" style="color:  #ec0c38 !important;">\n                      <i class="bg-danger"></i> error\n                  </span>',
on_schedule:'<span class="badge badge-dot" style="color: #11cdef !important;">\n                          <i class="bg-info"></i> running\n                      </span>'}})(a.Platform||(a.Platform={}))})(a.WebApp||(a.WebApp={}))})(bioCAD||(bioCAD={}));
